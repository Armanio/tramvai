(self.webpackChunk=self.webpackChunk||[]).push([[4796],{3905:(n,e,t)=>{"use strict";t.d(e,{Zo:()=>d,kt:()=>m});var r=t(7294);function o(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function i(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?a(Object(t),!0).forEach((function(e){o(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function s(n,e){if(null==n)return{};var t,r,o=function(n,e){if(null==n)return{};var t,r,o={},a=Object.keys(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}var c=r.createContext({}),p=function(n){var e=r.useContext(c),t=e;return n&&(t="function"==typeof n?n(e):i(i({},e),n)),t},d=function(n){var e=p(n.components);return r.createElement(c.Provider,{value:e},n.children)},l={inlineCode:"code",wrapper:function(n){var e=n.children;return r.createElement(r.Fragment,{},e)}},g=r.forwardRef((function(n,e){var t=n.components,o=n.mdxType,a=n.originalType,c=n.parentName,d=s(n,["components","mdxType","originalType","parentName"]),g=p(t),m=o,u=g["".concat(c,".").concat(m)]||g[m]||l[m]||a;return t?r.createElement(u,i(i({ref:e},d),{},{components:t})):r.createElement(u,i({ref:e},d))}));function m(n,e){var t=arguments,o=e&&e.mdxType;if("string"==typeof n||o){var a=t.length,i=new Array(a);i[0]=g;var s={};for(var c in e)hasOwnProperty.call(e,c)&&(s[c]=e[c]);s.originalType=n,s.mdxType="string"==typeof n?n:o,i[1]=s;for(var p=2;p<a;p++)i[p]=t[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}g.displayName="MDXCreateElement"},8206:(n,e,t)=>{"use strict";t.r(e),t.d(e,{frontMatter:()=>s,contentTitle:()=>c,metadata:()=>p,toc:()=>d,default:()=>g});var r=t(2122),o=t(9756),a=(t(7294),t(3905)),i=["components"],s={id:"common-tokens",title:"common-tokens"},c=void 0,p={unversionedId:"references/tokens/common-tokens",id:"references/tokens/common-tokens",isDocsHomePage:!1,title:"common-tokens",description:"\u041c\u043e\u0434\u0443\u043b\u044c \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0439 \u0442\u043e\u043a\u0435\u043d\u044b \u0442\u0440\u0430\u043c\u0432\u0430\u044f \u0434\u043b\u044f \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0438 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u043c\u043e\u0434\u0443\u043b\u044f \u0440\u043e\u0443\u0442\u0438\u043d\u0433\u0430.",source:"@site/tmp-docs/references/tokens/common-tokens.md",sourceDirName:"references/tokens",slug:"/references/tokens/common-tokens",permalink:"/docs/references/tokens/common-tokens",editUrl:"https://github.com/TinkoffCreditSystems/tramvai/-/edit/master/docs/get-started/overview.md/tmp-docs/references/tokens/common-tokens.md",version:"current",frontMatter:{id:"common-tokens",title:"common-tokens"},sidebar:"docs",previous:{title:"render-tokens",permalink:"/docs/references/tokens/render-tokens"},next:{title:"metrics-tokens",permalink:"/docs/references/tokens/metrics-tokens"}},d=[{value:"\u0421\u043f\u0438\u0441\u043e\u043a action \u0442\u043e\u043a\u0435\u043d\u043e\u0432",id:"\u0441\u043f\u0438\u0441\u043e\u043a-action-\u0442\u043e\u043a\u0435\u043d\u043e\u0432",children:[]},{value:"\u0421\u043f\u0438\u0441\u043e\u043a bundle \u0442\u043e\u043a\u0435\u043d\u043e\u0432",id:"\u0441\u043f\u0438\u0441\u043e\u043a-bundle-\u0442\u043e\u043a\u0435\u043d\u043e\u0432",children:[]},{value:"\u0421\u043f\u0438\u0441\u043e\u043a componentRegistry \u0442\u043e\u043a\u0435\u043d\u043e\u0432",id:"\u0441\u043f\u0438\u0441\u043e\u043a-componentregistry-\u0442\u043e\u043a\u0435\u043d\u043e\u0432",children:[]},{value:"\u0421\u043f\u0438\u0441\u043e\u043a env \u0442\u043e\u043a\u0435\u043d\u043e\u0432",id:"\u0441\u043f\u0438\u0441\u043e\u043a-env-\u0442\u043e\u043a\u0435\u043d\u043e\u0432",children:[]},{value:"\u0421\u043f\u0438\u0441\u043e\u043a context \u0442\u043e\u043a\u0435\u043d\u043e\u0432",id:"\u0441\u043f\u0438\u0441\u043e\u043a-context-\u0442\u043e\u043a\u0435\u043d\u043e\u0432",children:[]},{value:"\u0421\u043f\u0438\u0441\u043e\u043a hook \u0442\u043e\u043a\u0435\u043d\u043e\u0432",id:"\u0441\u043f\u0438\u0441\u043e\u043a-hook-\u0442\u043e\u043a\u0435\u043d\u043e\u0432",children:[]},{value:"\u0421\u043f\u0438\u0441\u043e\u043a logger \u0442\u043e\u043a\u0435\u043d\u043e\u0432",id:"\u0441\u043f\u0438\u0441\u043e\u043a-logger-\u0442\u043e\u043a\u0435\u043d\u043e\u0432",children:[]},{value:"\u0421\u043f\u0438\u0441\u043e\u043a pubsub \u0442\u043e\u043a\u0435\u043d\u043e\u0432",id:"\u0441\u043f\u0438\u0441\u043e\u043a-pubsub-\u0442\u043e\u043a\u0435\u043d\u043e\u0432",children:[]},{value:"\u0421\u043f\u0438\u0441\u043e\u043a requestManager \u0442\u043e\u043a\u0435\u043d\u043e\u0432",id:"\u0441\u043f\u0438\u0441\u043e\u043a-requestmanager-\u0442\u043e\u043a\u0435\u043d\u043e\u0432",children:[]},{value:"\u0421\u043f\u0438\u0441\u043e\u043a responseManager \u0442\u043e\u043a\u0435\u043d\u043e\u0432",id:"\u0441\u043f\u0438\u0441\u043e\u043a-responsemanager-\u0442\u043e\u043a\u0435\u043d\u043e\u0432",children:[]},{value:"\u0421\u043f\u0438\u0441\u043e\u043a state \u0442\u043e\u043a\u0435\u043d\u043e\u0432",id:"\u0441\u043f\u0438\u0441\u043e\u043a-state-\u0442\u043e\u043a\u0435\u043d\u043e\u0432",children:[]}],l={toc:d};function g(n){var e=n.components,t=(0,o.Z)(n,i);return(0,a.kt)("wrapper",(0,r.Z)({},l,t,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u041c\u043e\u0434\u0443\u043b\u044c \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0439 \u0442\u043e\u043a\u0435\u043d\u044b \u0442\u0440\u0430\u043c\u0432\u0430\u044f \u0434\u043b\u044f \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0438 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u043c\u043e\u0434\u0443\u043b\u044f \u0440\u043e\u0443\u0442\u0438\u043d\u0433\u0430."),(0,a.kt)("h2",{id:"\u0441\u043f\u0438\u0441\u043e\u043a-action-\u0442\u043e\u043a\u0435\u043d\u043e\u0432"},"\u0421\u043f\u0438\u0441\u043e\u043a action \u0442\u043e\u043a\u0435\u043d\u043e\u0432"),(0,a.kt)("p",null,(0,a.kt)("pre",{parentName:"p"},(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { createToken } from '@tinkoff/dippy';\nimport type { Action } from '@tramvai/core';\n\n/**\n * @description\n * \u0420\u0435\u0433\u0438\u0441\u0442\u0440 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u044d\u043a\u0448\u0435\u043d\u043e\u0432 \u043f\u043e \u0442\u0438\u043f\u0430\u043c\n */\nexport const ACTION_REGISTRY_TOKEN = createToken<ActionsRegistry>('actionRegistry');\n\n/**\n * @description\n * \u0421\u0443\u0449\u043d\u043e\u0441\u0442\u044c \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u044d\u043a\u0448\u0435\u043d\u043e\u0432\n */\nexport const ACTION_EXECUTION_TOKEN = createToken<ActionExecution>('actionExecution');\n\n/**\n * @description\n * \u0421\u0443\u0448\u043d\u043e\u0441\u0442\u044c \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u044d\u043a\u0448\u0435\u043d\u043e\u0432 \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430\u0445\n */\nexport const ACTION_PAGE_RUNNER_TOKEN = createToken<ActionPageRunner>('actionPageRunner');\n\n/**\n * @description\n * \u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u043d\u0430 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u044d\u043a\u0448\u0435\u043d\u043e\u0432\n */\nexport const ACTION_CONDITIONALS = createToken<ActionCondition[]>('actionConditionals', {\n  multi: true,\n});\n\nexport interface ActionsRegistry {\n  add(type: string, actions: Action | Action[]): void;\n\n  get(type: string, addingActions?: Action[]): Action[];\n  getGlobal(): Action[];\n\n  remove(type: string, actions?: Action | Action[]): void;\n}\n\nexport interface ActionExecution {\n  execution: Map<string, any[]>;\n\n  run(action: Action, payload: any): Promise<any>;\n}\n\nexport interface ActionPageRunner {\n  runActions(actions: Action[], stopRunAtError?: (error: Error) => boolean): Promise<any>;\n}\n\nexport interface ActionConditionChecker<State = any> {\n  payload: any;\n  parameters: any;\n  conditions: Record<string, any>;\n  type: 'global' | 'local';\n  allow(): void;\n  setState(value: State): void;\n  getState(): State;\n  forbid(): void;\n}\n\nexport type ActionCondition = {\n  key: string;\n  fn: (checker: ActionConditionChecker) => void;\n};\n\n"))),(0,a.kt)("h2",{id:"\u0441\u043f\u0438\u0441\u043e\u043a-bundle-\u0442\u043e\u043a\u0435\u043d\u043e\u0432"},"\u0421\u043f\u0438\u0441\u043e\u043a bundle \u0442\u043e\u043a\u0435\u043d\u043e\u0432"),(0,a.kt)("p",null,(0,a.kt)("pre",{parentName:"p"},(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { createToken } from '@tinkoff/dippy';\nimport type { Bundle } from '@tramvai/core';\n\n/**\n * @description\n * \u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u0431\u0430\u043d\u0434\u043b\u043e\u0432. \u041f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0431\u0430\u043d\u0434\u043b\u0430 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u044d\u043a\u0448\u0435\u043d\u044b \u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u0438\u0437 \u0431\u0430\u043d\u0434\u043b\u0430 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0432\u0443\u044e\u0449\u0438\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430\n */\nexport const BUNDLE_MANAGER_TOKEN = createToken<BundleManager>('bundleManager');\n\n/**\n * @description\n * \u0422\u043e\u043a\u0435\u043d \u0434\u043b\u044f \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0431\u0430\u043d\u0434\u043b\u043e\u0432 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435.\n * \u0412\u0430\u0436\u043d\u043e! \u041d\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u0431\u0430\u043d\u0434\u043b\u044b.\n */\nexport const ADDITIONAL_BUNDLE_TOKEN = createToken<{ [key: string]: Bundle }>('additional bundle', {\n  multi: true,\n});\n\nexport interface BundleManager {\n  bundles: Record<string, any>;\n\n  get(name: string, pageComponent: string): Promise<any>;\n\n  has(name: string): boolean;\n}\n\n"))),(0,a.kt)("h2",{id:"\u0441\u043f\u0438\u0441\u043e\u043a-componentregistry-\u0442\u043e\u043a\u0435\u043d\u043e\u0432"},"\u0421\u043f\u0438\u0441\u043e\u043a componentRegistry \u0442\u043e\u043a\u0435\u043d\u043e\u0432"),(0,a.kt)("p",null,(0,a.kt)("pre",{parentName:"p"},(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { createToken } from '@tinkoff/dippy';\n\n/**\n * @description\n * \u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 react-\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432.\n * \u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u043e \u043d\u0430 \u0431\u0430\u043d\u0434\u043b\u044b, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043f\u0440\u0438 \u0437\u0430\u0434\u0430\u043d\u0438\u0438\\\u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043a\u043b\u044e\u0447 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u0434\u043b\u0430.\n * \u0422\u0430\u043a\u0436\u0435 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u0442\u043e\u0434 _getComponentParam_\n */\nexport const COMPONENT_REGISTRY_TOKEN = createToken<ComponentRegistry>('componentRegistry');\n\nexport interface ComponentRegistry {\n  components: Record<string, any>;\n\n  add(name: string, component: any, bundle?: string): void;\n\n  get(name: string, bundle?: string): any;\n\n  getComponentParam<T>(param: string, defaultValue: T, component: string, bundle?: string): T;\n}\n\n"))),(0,a.kt)("h2",{id:"\u0441\u043f\u0438\u0441\u043e\u043a-env-\u0442\u043e\u043a\u0435\u043d\u043e\u0432"},"\u0421\u043f\u0438\u0441\u043e\u043a env \u0442\u043e\u043a\u0435\u043d\u043e\u0432"),(0,a.kt)("p",null,(0,a.kt)("pre",{parentName:"p"},(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { createToken } from '@tinkoff/dippy';\n\nexport interface EnvironmentManager {\n  get(name: string): string;\n  getInt(name: string, def: number): number;\n  getAll(): Record<string, string>;\n  update(result: Record<string, string>): void;\n  clientUsed(): Record<string, string>;\n  updateClientUsed(result: Record<string, string>): void;\n}\n\n/**\n * @description\n * \u0421\u0443\u0449\u043d\u043e\u0441\u0442\u044c `environmentManager` c \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 env \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0435\n */\nexport const ENV_MANAGER_TOKEN = createToken<EnvironmentManager>('environmentManager');\n\n/**\n * @description\n * \u0421\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u043a\u0435\u043d\u043e\u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b \u043c\u043e\u0434\u0443\u043b\u044e \u0438\u043b\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e.\n * \u041f\u043e\u0437\u0434\u043d\u0435\u0435 \u0432\u0441\u0435 \u0442\u043e\u043a\u0435\u043d\u044b \u0438\u0437 \u044d\u0442\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430 \u0431\u0443\u0434\u0443\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0447\u0435\u0440\u0435\u0437 `environmentManager`\n * \u0424\u043e\u0440\u043c\u0430\u0442 \u0442\u043e\u043a\u0435\u043d\u0430 ENV_USED_TOKEN:\n    - `key` - \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 env \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439. \u041f\u043e\u0434 \u044d\u0442\u0438\u043c \u043a\u043b\u044e\u0447\u0435\u043c \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u0432 `environmentManager` \u0438 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e \u0438\u0437 \u0432\u043d\u0435\u0448\u043d\u0438\u0445 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u043e\u0432\n    - `value` - \u043f\u0440\u0435\u0434\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0442\u043e\u043a\u0435\u043d\u0430 `key` \u0441 \u043d\u0438\u0437\u043a\u0438\u043c \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043e\u043c\n    - `optional` - \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043b\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u043c \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u0415\u0441\u043b\u0438 `true`, \u0442\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u043f\u0430\u0434\u0430\u0442\u044c, \u0435\u0441\u043b\u0438 \u043d\u0435 \u0431\u044b\u043b\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\n    - `validator` - \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f. \u0415\u0441\u043b\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0432\u0435\u0440\u043d\u0435\u0442 \u0442\u0435\u043a\u0441\u0442, \u0442\u043e \u0432\u044b\u043a\u0438\u043d\u0435\u0442\u0441\u044f \u043e\u0448\u0438\u0431\u043a\u0430\n    - `dehydrate` - \u0435\u0441\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e `false`, \u0442\u043e env \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0441\u0442\u0441\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0443 \u0438 \u043c\u043e\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0435\n *\n * @example\n  ```tsx\n  interface EnvParameter {\n    key: string;\n    value?: string;\n    optional?: boolean;\n    validator?: (value: string) => boolean | string;\n    dehydrate?: boolean;\n  }\n  ```\n */\nexport interface EnvParameter {\n  key: string;\n  value?: string;\n  optional?: boolean;\n  validator?: (value: string) => boolean | string;\n  dehydrate?: boolean;\n}\n\nexport const ENV_USED_TOKEN = createToken<EnvParameter[]>('envUsed', { multi: true });\n\n"))),(0,a.kt)("h2",{id:"\u0441\u043f\u0438\u0441\u043e\u043a-context-\u0442\u043e\u043a\u0435\u043d\u043e\u0432"},"\u0421\u043f\u0438\u0441\u043e\u043a context \u0442\u043e\u043a\u0435\u043d\u043e\u0432"),(0,a.kt)("p",null,(0,a.kt)("pre",{parentName:"p"},(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import type { Container } from '@tinkoff/dippy';\nimport { createToken } from '@tinkoff/dippy';\nimport type { ConsumerContext as BaseConsumerContext } from '@tramvai/types-actions-state-context';\nimport type { PUBSUB_TOKEN } from './pubsub';\n\nexport { PlatformAction } from '@tramvai/types-actions-state-context';\n\n/**\n * @description\n * \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430\n */\nexport const CONTEXT_TOKEN = createToken<ConsumerContext>('context');\n\nexport interface ConsumerContext extends BaseConsumerContext {\n  readonly di: Container;\n  readonly pubsub: typeof PUBSUB_TOKEN;\n\n  dehydrate: () => {\n    dispatcher: {\n      stores: Record<string, any>;\n    };\n  };\n}\n\n"))),(0,a.kt)("h2",{id:"\u0441\u043f\u0438\u0441\u043e\u043a-hook-\u0442\u043e\u043a\u0435\u043d\u043e\u0432"},"\u0421\u043f\u0438\u0441\u043e\u043a hook \u0442\u043e\u043a\u0435\u043d\u043e\u0432"),(0,a.kt)("p",null,(0,a.kt)("pre",{parentName:"p"},(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { createToken } from '@tinkoff/dippy';\n\n/**\n * @description\n * \u0412 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0432\u0441\u0442\u0440\u043e\u0438\u0442\u044c\u0441\u044f \u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b \u0438 \u044d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0445\u0443\u043a\u0438, [\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f](https://tramvai.dev/docs/references/libs/hooks)\n */\nexport const HOOK_TOKEN = createToken<Hooks>('hooks');\n\ntype Hook<TPayload> = (context: any, payload?: TPayload, options?: any) => TPayload;\n\nexport interface Hooks {\n  /**\n   * \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0445\u0443\u043a\u043e\u0432\n   */\n  registerHooks<TPayload>(name: string, list: Hook<TPayload>[] | Hook<TPayload>): void;\n\n  /**\n   * \u0417\u0430\u043f\u0443\u0441\u043a \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0445 \u0445\u0443\u043a\u043e\u0432, payload \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0442 \u0447\u0435\u0440\u0435\u0437 \u0432\u0441\u0435 \u0445\u0443\u043a\u0438 \u0438 \u0431\u0443\u0434\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u043c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f\n   */\n  runHooks<TPayload>(name: string, context: any, payload?: TPayload, options?: any): TPayload;\n\n  /**\n   * \u0417\u0430\u043f\u0443\u0441\u043a \u0430\u0441\u0441\u0438\u0445\u0440\u043e\u043d\u043d\u044b\u0445 \u0445\u0443\u043a\u043e\u0432\n   */\n  runAsyncHooks<TPayload>(name: string, context: any, payload: TPayload, options?: any): TPayload;\n\n  /**\n   * \u0417\u0430\u043f\u0443\u0441\u043a \u043f\u0440\u043e\u043c\u043c\u0438\u0441 \u0445\u0443\u043a\u043e\u0432\n   */\n  runPromiseHooks(\n    name: string,\n    context: any,\n    options?: any\n  ): <TPayload>(payload: TPayload) => Promise<TPayload> | Promise<never>;\n}\n\n"))),(0,a.kt)("h2",{id:"\u0441\u043f\u0438\u0441\u043e\u043a-logger-\u0442\u043e\u043a\u0435\u043d\u043e\u0432"},"\u0421\u043f\u0438\u0441\u043e\u043a logger \u0442\u043e\u043a\u0435\u043d\u043e\u0432"),(0,a.kt)("p",null,(0,a.kt)("pre",{parentName:"p"},(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import type { Logger } from '@tinkoff/logger';\nimport { createToken } from '@tinkoff/dippy';\n\n/**\n * @description\n * \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043b\u043e\u0433\u0433\u0435\u0440\u0430\n */\nexport const LOGGER_TOKEN = createToken<LoggerFactory>('logger');\n\n/**\n * @description\n * \u0414\u0430\u0435\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043c\u043e\u0434\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043b\u043e\u0433\u0433\u0435\u0440 \u043d\u0430 \u044d\u0442\u0430\u043f\u0435 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438\n */\nexport const LOGGER_INIT_HOOK = createToken<LoggerInitHook>('loggerHook');\n\ntype Config = {\n  name: string;\n  [key: string]: any;\n};\n\nexport type LoggerFactory = Logger & ((configOrName: string | Config) => Logger);\n\ntype LoggerInitHook = (logger: LoggerFactory) => void;\n\nexport type { Logger, LogFn, LogArg } from '@tinkoff/logger';\n\n"))),(0,a.kt)("h2",{id:"\u0441\u043f\u0438\u0441\u043e\u043a-pubsub-\u0442\u043e\u043a\u0435\u043d\u043e\u0432"},"\u0421\u043f\u0438\u0441\u043e\u043a pubsub \u0442\u043e\u043a\u0435\u043d\u043e\u0432"),(0,a.kt)("p",null,(0,a.kt)("pre",{parentName:"p"},(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { createToken } from '@tinkoff/dippy';\n\n/**\n * @description\n * \u0424\u0430\u0431\u0440\u0438\u043a\u0430 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u0430 pubsub\n */\nexport const PUBSUB_FACTORY_TOKEN = createToken<() => PubSub>('pubsubFactory');\n\n/**\n * @description\n * \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u043d\u0441\u0442\u0430\u043d\u0441 pubsub \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0436\u0438\u0432\u0435\u0442 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f\n */\nexport const PUBSUB_TOKEN = createToken<PubSub>('pubsub');\n\n/**\n * @description\n * \u0418\u043d\u0441\u0442\u0430\u043d\u0441 pubsub \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0441\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430\n */\nexport const ROOT_PUBSUB_TOKEN = createToken<PubSub>('rootPubsub');\n\nexport interface PubSub {\n  subscribe(event: string, fn: (payload?: any) => void): () => boolean;\n\n  publish(event: string, ...args: unknown[]): any;\n}\n\n"))),(0,a.kt)("h2",{id:"\u0441\u043f\u0438\u0441\u043e\u043a-requestmanager-\u0442\u043e\u043a\u0435\u043d\u043e\u0432"},"\u0421\u043f\u0438\u0441\u043e\u043a requestManager \u0442\u043e\u043a\u0435\u043d\u043e\u0432"),(0,a.kt)("p",null,(0,a.kt)("pre",{parentName:"p"},(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { createToken } from '@tinkoff/dippy';\nimport type { Request } from 'express';\n\n// \u042d\u0442\u043e \u043a\u043e\u0441\u0442\u044b\u043b\u044c \u0447\u0442\u043e\u0431\u044b \u043e\u0431\u043e\u0439\u0442\u0438 \u0438\u043d\u043b\u0430\u0439\u043d\u0438\u043d\u0433 Request'\u0430 \u0438 \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0440\u0443\u0436\u0443 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0445 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439 express'\u0430\ntype RequestExt = Request;\n/**\n * @description\n * \u041f\u0440\u044f\u043c\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043e\u0431\u044a\u0435\u043a\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\n */\nexport const REQUEST = createToken<RequestExt>('request');\n\n/**\n * @description\n * \u0421\u0443\u0449\u043d\u043e\u0441\u0442\u044c \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u0430\u043c\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 (\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, query-\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b, \u043a\u0443\u043a\u0438).\n * \u0412 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435, \u043d\u043e \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0435 \u0435\u0441\u0442\u044c \u043e\u0431\u0440\u0435\u0437\u0430\u043d\u043d\u044b\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b, \u0434\u043b\u044f \u0443\u043f\u0440\u043e\u0449\u0435\u043d\u0438\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0438\u0437\u043e\u043c\u043e\u0440\u0444\u043d\u043e\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f\n */\nexport const REQUEST_MANAGER_TOKEN = createToken<RequestManager>('requestManager');\n\nexport interface RequestManager {\n  getBody(): unknown;\n\n  getUrl(): string;\n\n  getMethod(): string;\n\n  getCookie(key: string): string;\n\n  getCookies(): Record<string, string>;\n\n  getHeader(key: string): string | string[];\n\n  getHeaders(): Record<string, string | string[]>;\n\n  getClientIp(): string;\n\n  getHost(): string;\n}\n\n"))),(0,a.kt)("h2",{id:"\u0441\u043f\u0438\u0441\u043e\u043a-responsemanager-\u0442\u043e\u043a\u0435\u043d\u043e\u0432"},"\u0421\u043f\u0438\u0441\u043e\u043a responseManager \u0442\u043e\u043a\u0435\u043d\u043e\u0432"),(0,a.kt)("p",null,(0,a.kt)("pre",{parentName:"p"},(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { createToken } from '@tinkoff/dippy';\nimport type { Response } from 'express';\n\n/**\n * @description\n * \u041f\u0440\u044f\u043c\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043e\u0431\u044a\u0435\u043a\u0442 \u043e\u0442\u0432\u0435\u0442\u0430\n */\nexport const RESPONSE = createToken<Response>('response');\n\n/**\n * @description\n * \u0421\u0443\u0449\u043d\u043e\u0441\u0442\u044c \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u0430\u043c\u0438 \u043e\u0442\u0432\u0435\u0442\u0430 (\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u043e\u0442\u0432\u0435\u0442\u0430, \u043a\u0443\u043a\u0438, \u0442\u0435\u043b\u043e \u043e\u0442\u0432\u0435\u0442\u0430).\n * \u0412 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435, \u043d\u043e \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0435 \u0435\u0441\u0442\u044c \u043e\u0431\u0440\u0435\u0437\u0430\u043d\u043d\u044b\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b, \u0434\u043b\u044f \u0443\u043f\u0440\u043e\u0449\u0435\u043d\u0438\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0438\u0437\u043e\u043c\u043e\u0440\u0444\u043d\u043e\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f\n */\nexport const RESPONSE_MANAGER_TOKEN = createToken<ResponseManager>('responseManager');\n\nexport interface ResponseManager {\n  getBody(): string;\n\n  setBody(value: string): void;\n\n  getHeader(key: string): string | string[];\n\n  getHeaders(): Record<string, string | string[]>;\n\n  setHeader(key: string, value: string): void;\n\n  getCookie(key: string): string;\n\n  getCookies(): Record<string, string>;\n\n  setCookie(key: string, value: string): void;\n\n  getStatus(): number;\n\n  setStatus(status: number): void;\n}\n\n"))),(0,a.kt)("h2",{id:"\u0441\u043f\u0438\u0441\u043e\u043a-state-\u0442\u043e\u043a\u0435\u043d\u043e\u0432"},"\u0421\u043f\u0438\u0441\u043e\u043a state \u0442\u043e\u043a\u0435\u043d\u043e\u0432"),(0,a.kt)("p",null,(0,a.kt)("pre",{parentName:"p"},(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { createToken } from '@tinkoff/dippy';\nimport type { DispatcherContext, Event, Middleware, Reducer } from '@tramvai/state';\n\n/**\n * @description\n * \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f dispatcher\n */\nexport const DISPATCHER_TOKEN = createToken('dispatcher');\n\n/**\n * @description\n * \u0420\u0435\u0430\u043b\u0438\u0437\u0446\u0438\u044f dispatcher context\n */\nexport const DISPATCHER_CONTEXT_TOKEN = createToken<DispatcherContext<any>>('dispatcherContext');\n\n/**\n * @description\n * \u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0441\u0432\u043e\u0438 \u0441\u0442\u043e\u0440\u044b \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u0447\u0435\u0440\u0435\u0437 createReducer\n */\nexport const COMBINE_REDUCERS = createToken('combineReducers', { multi: true });\n\n/**\n * @description\n * \u041e\u0431\u0449\u0438\u0439 \u0441\u0442\u043e\u0440 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f\n */\nexport const STORE_TOKEN = createToken<Store>('store');\n\n/**\n * @description\n * \u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0437\u0430\u0434\u0430\u0432\u0430\u0442\u044c \u0441\u0432\u043e\u0438 middlewares \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u043e \u0441\u0442\u0435\u0439\u0442\u043e\u043c\n */\nexport const STORE_MIDDLEWARE = createToken<Middleware>('storeMiddleware', { multi: true });\n\nexport interface Store<State = Record<string, any>> {\n  dispatch: <Payload>(actionOrNameEvent: string | Event<Payload>, payload?: Payload) => Payload;\n\n  subscribe(callback: (state: Record<string, any>) => void): () => void;\n  subscribe<S>(reducer: Reducer<S>, callback: (state: S) => void): () => void;\n\n  getState(): State;\n  getState<S>(reducer: Reducer<S>): S;\n}\n\n"))))}g.isMDXComponent=!0}}]);
<!doctype html>
<html class="docs-version-current" lang="ru" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<title data-react-helmet="true">@tramvai/build | tramvai</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://tramvai.dev//docs/references/tools/build"><meta data-react-helmet="true" name="docusaurus_locale" content="ru"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="@tramvai/build | tramvai"><meta data-react-helmet="true" name="description" content="Library for building production ready bundles for packages written in TypeScript targetting next environments:"><meta data-react-helmet="true" property="og:description" content="Library for building production ready bundles for packages written in TypeScript targetting next environments:"><link data-react-helmet="true" rel="icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://tramvai.dev//docs/references/tools/build"><link data-react-helmet="true" rel="alternate" href="https://tramvai.dev//docs/references/tools/build" hreflang="ru"><link data-react-helmet="true" rel="alternate" href="https://tramvai.dev//en/docs/references/tools/build" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://tramvai.dev//docs/references/tools/build" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.c5e69d71.css">
<link rel="preload" href="/assets/js/runtime~main.b723213f.js" as="script">
<link rel="preload" href="/assets/js/main.0ad2b921.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-tinkoff.svg" alt="tramvai" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo-tinkoff.svg" alt="tramvai" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">tramvai</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/get-started/overview">Docs</a><a class="navbar__item navbar__link" href="/docs/references/tramvai/create-app">API</a><a href="https://github.com/Tinkoff/tramvai" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_3vod"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>–†—É—Å—Å–∫–∏–π</span></span></a><ul class="dropdown__menu"><li><a href="/docs/references/tools/build" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">–†—É—Å—Å–∫–∏–π</a></li><li><a href="/en/docs/references/tools/build" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li></ul></div><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">üåú</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">üåû</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/get-started/overview">Getting started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/tutorials/pokedex-app/new-app">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/concepts/overview">–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/features/react">–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/guides/tramvai-library">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/how-to/how-create-module">–†–µ—Ü–µ–ø—Ç—ã</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" href="/docs/references/tramvai/create-app">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" tabindex="0" href="/docs/references/tramvai/create-app">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" tabindex="0" href="/docs/references/modules/autoscroll">–ú–æ–¥—É–ª–∏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" tabindex="0" href="/docs/references/libs/browser-timings">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" tabindex="0" href="/docs/references/tokens/router-tokens">–¢–æ–∫–µ–Ω—ã</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" tabindex="0" href="/docs/references/cli/base">CLI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" tabindex="0" href="/docs/references/test/test-unit">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" tabindex="0" href="/docs/references/tools/monorepo-tools/fix-ts-references">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" tabindex="0" href="/docs/references/tools/monorepo-tools/fix-ts-references">–î–ª—è –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/references/tools/build">@tramvai/build</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/references/tools/migrate">@tramvai/tools-migrate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/references/tools/check-versions">@tramvai/tools-check-versions</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="#" class="menu__link menu__link--sublist">–†–µ–ª–∏–∑—ã</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/contribute/">Contribute</a></div></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_2rXS"><div class="docItemContainer_1EXp"><article><div class="markdown"><header><h1>@tramvai/build</h1></header><p>Library for building <code>production</code> ready bundles for packages written in TypeScript targetting next environments:</p><ul><li>NodeJS</li><li>Bundlers (Webpack, etc.)</li><li>Browsers</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="installation">Installation<a aria-hidden="true" class="hash-link" href="#installation" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h2><p>Install <code>@tramvai/build</code> first:</p><div class="codeBlockContainer_K1bP language-bash"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> @tramvai/build</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><p>Add necessary fields to <code>package.json</code>:</p><div class="codeBlockContainer_K1bP language-json"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;main&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lib/index.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;typings&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;src/index.ts&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><blockquote><p><code>&quot;main&quot;: &quot;lib/index.js&quot;</code> based on that field lib calculates entry point for the build and it will be <code>&quot;src/index.ts&quot;</code> in this case</p></blockquote><blockquote><p><code>&quot;typings&quot;: &quot;src/index.ts&quot;</code> desirable to specify that field to entry point as it is useful for the monorepo projects and allows to use current package in other packages without build. After build package for publication this filed will be replaced to point to the built typedef file, in this case - <code>&quot;typings&quot;: &quot;lib/index.d.ts&quot;</code></p></blockquote><p>And to <code>tsconfig.json</code>:</p><div class="codeBlockContainer_K1bP language-json"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;compilerOptions&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;moduleResolution&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;node&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;target&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ES5&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;module&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CommonJS&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;declaration&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;importHelpers&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;skipLibCheck&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;rootDir&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./src&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;outDir&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./lib&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;declarationDir&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./lib&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;include&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./src&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><p>Add to <code>dependencies</code> library <a href="https://www.npmjs.com/package/tslib" target="_blank" rel="noopener noreferrer">tslib</a>:</p><div class="codeBlockContainer_K1bP language-bash"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> tslib</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><p>Build package with command <code>tramvai-build</code>:</p><div class="codeBlockContainer_K1bP language-bash"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">tramvai-build --forPublish</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><blockquote><p>with flag <code>--forPublish</code> tramvai-build replaces some fields in <code>package.json</code> in order to make built package usable in the end apps, for example <code>&quot;typings&quot;: &quot;src/index.ts&quot;</code> replaces by <code>&quot;typings&quot;: &quot;lib/index.d.ts&quot;</code></p></blockquote><h2 class="anchor anchorWithStickyNavbar_31ik" id="explanation">Explanation<a aria-hidden="true" class="hash-link" href="#explanation" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h2><p>The main purpose for the lib is the effective <code>production</code> build for TypeScript package using <a href="https://rollupjs.org/" target="_blank" rel="noopener noreferrer">rollup</a>, with <a href="https://rollupjs.org/guide/en/#rollupwatch" target="_blank" rel="noopener noreferrer">watch</a> mode support.</p><p>Such builds, especially for monorepositories with big number of packages, can take a long time and are not very comfortable to work. Thats why, for the <code>development</code> environment it is preferred to use <a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html" target="_blank" rel="noopener noreferrer">tsc</a> with <a href="https://www.typescriptlang.org/docs/handbook/project-references.html" target="_blank" rel="noopener noreferrer">project references</a> and <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-4.html#faster-subsequent-builds-with-the---incremental-flag" target="_blank" rel="noopener noreferrer">incremental build</a>.</p><p>Recommended and automatically generated <code>package.json</code> for <code>@tramvai/build</code> allows apps to use packages that were built either with <code>tsc</code>, or with <code>@tramvai/build</code> without any additional steps.</p><p>All of the built bundles will contain <code>ES2019</code> standard code, it is expected that they will be bundled to <code>ES5</code> using bundler (Webpack, etc.) with configured transpilation through <code>babel</code> for packages inside <code>node_modules</code>, written in modern JS.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="nodejs-bundle-in-commonjs-format">NodeJS bundle in CommonJs format<a aria-hidden="true" class="hash-link" href="#nodejs-bundle-in-commonjs-format" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><p>NodeJS before 12 version hasn&#x27;t supported ES modules or supported it only behind special flag. <code>@tramvai/build</code> generates bundle in <code>ES2019</code> standard in <code>CommonJS</code> format automatically. Name of the result bundle is taken from field <code>main</code> in <code>package.json</code>, e.g. <code>lib/index.js</code>.</p><p>When bundling package in the app using <code>webpack</code> with option <code>target: &#x27;node&#x27;</code> this <code>CommonJS</code> bundle probably will not be used as webpack will prefer to use <code>module</code> field while resolving source code.</p><blockquote><p>It is expected that bundle from field <code>&quot;main&quot;</code> will be resolved only by <code>NodeJS</code> itself while bundlers will use bundle from field <code>&quot;module&quot;</code></p></blockquote><h3 class="anchor anchorWithStickyNavbar_31ik" id="bundle-for-bundlers-webpack-etc-in-es-modules-format">Bundle for bundlers (Webpack, etc.) in ES modules format<a aria-hidden="true" class="hash-link" href="#bundle-for-bundlers-webpack-etc-in-es-modules-format" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><p>Modern bundlers support ES modules and non-standard field <code>&quot;module&quot;</code> in <code>package.json</code>. <code>@tramvai/build</code> generates bundle in <code>ES2019</code> standard in <code>ES modules</code> format automatically. Name of the result bundle is calculates from field <code>main</code> in <code>package.json</code> by adding postfix <code>.es</code> e.g. <code>lib/index.es.js</code>.</p><p>If build was called with flag <code>--forPublish</code> to <code>package.json</code> will be added new field <code>&quot;module&quot;: &quot;lib/index.es.js&quot;</code>.</p><p>When bundling package in the app through <code>webpack</code> with option <code>target: &#x27;node&#x27;</code> bundle from field <code>module</code> will have higher priority over bundle from <code>main</code>.</p><blockquote><p><code>ES2019</code> code standard is generated as it is expected that bundle from field <code>&quot;module&quot;</code> will be resolved by bundler with configured transpilation through <code>babel</code> for packages inside <code>node_modules</code>, written in modern JS. Why we still prefer to use <code>ES5</code> code over <code>ES2019</code>? Apparently, code in <code>ES5</code> is still notably faster on NodeJS server. In the same time output bundle size is not important on server.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_31ik" id="bundle-for-browsers">Bundle for browsers<a aria-hidden="true" class="hash-link" href="#bundle-for-browsers" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><p>Modern bundlers support ES modules and non-standard field <code>&quot;browser&quot;</code> in <code>package.json</code>. When field <code>browser</code> in specified in <code>package.json</code>, <code>@tramvai/build</code> will generate bundle in <code>ES2019</code> standard in <code>ES modules</code> format.</p><p>If field <code>browser</code> in <code>package.json</code> is defined as a string then this string determines entry point to <code>browser</code> bundle and its name. E.g. when <code>&quot;browser&quot;: &quot;lib/browser.js&quot;</code> entry point will be <code>src/browser.ts</code> and bundle will have a name <code>lib/browser.js</code>.</p><p>Otherwise, if field <code>browser</code> is defined as an object and build was called with flag <code>--forPublish</code> then name is defined by the field <code>main</code> in <code>package.json</code> with adding postfix <code>.browser</code> e.g. <code>lib/index.browser.js</code>. After that to field <code>browser</code> new property will be added as pointer for bundlers to bundle for the browser, instead of the field <code>module</code>:</p><div class="codeBlockContainer_K1bP language-json"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;browser&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;./index.es.js&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./index.browser.js&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><blockquote><p>Specification for the field <a href="https://github.com/defunctzombie/package-browser-field-spec" target="_blank" rel="noopener noreferrer">browser</a></p></blockquote><blockquote><p><code>ES2019</code> code standard is generated as it is expected that bundle from <code>&quot;browser&quot;</code> field will be resolved by bundler with configured transpilation through <code>babel</code> for packages inside <code>node_modules</code> written in modern JS to the code according to the <code>browserslist</code> config.</p></blockquote><p>When building our package in the app with <code>webpack</code> with option <code>target: &#x27;web&#x27;</code> bundle from field <code>browser</code> will be prioritized over field <code>module</code>.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="copy-static-assets">Copy static assets<a aria-hidden="true" class="hash-link" href="#copy-static-assets" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><p>For every build, all of the non JS/TS/JSON files (e.g. CSS, fonts, images) are copied to the output bundle preserving their relative paths (e.g. <code>src/css/style.css</code> -&gt; <code>lib/css/style.css</code>). You can disable such copying by using flag <code>copyStaticAssets</code>:</p><div class="codeBlockContainer_K1bP language-bash"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">tramvai-build --copyStaticAssets </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="build-and-copy-migrations">Build and copy migrations<a aria-hidden="true" class="hash-link" href="#build-and-copy-migrations" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><p>When directory <code>migrations</code> has any code files they are considered as migration files. These files will be compiled to <code>.js</code> and copied to directory <code>__migrations__</code>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="cli">CLI<a aria-hidden="true" class="hash-link" href="#cli" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="single-build">Single build<a aria-hidden="true" class="hash-link" href="#single-build" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><div class="codeBlockContainer_K1bP language-bash"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">tramvai-build</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="build-in-watch-mode">Build in watch mode<a aria-hidden="true" class="hash-link" href="#build-in-watch-mode" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><div class="codeBlockContainer_K1bP language-bash"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">tramvai-build --watch</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="copy-static-assets-1">Copy static assets<a aria-hidden="true" class="hash-link" href="#copy-static-assets-1" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><div class="codeBlockContainer_K1bP language-bash"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">tramvai-copy</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="available-flags">Available flags<a aria-hidden="true" class="hash-link" href="#available-flags" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><div class="codeBlockContainer_K1bP language-bash"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">tramvai-build --help</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="javascript-api">JavaScript API<a aria-hidden="true" class="hash-link" href="#javascript-api" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="tramvaibuild">TramvaiBuild<a aria-hidden="true" class="hash-link" href="#tramvaibuild" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><p><code>TramvaiBuild</code> is used to configure build process for following usage.</p><div class="codeBlockContainer_K1bP language-ts"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">TramvaiBuild</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@tramvai/build&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">TramvaiBuild</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><p><strong>Available options:</strong></p><p></p><div class="codeBlockContainer_K1bP language-typescript"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">Options</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  sourceDir</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  watchMode</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">boolean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  copyStaticAssets</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">boolean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  forPublish</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">boolean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><p></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="build">Build<a aria-hidden="true" class="hash-link" href="#build" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><p>Method <code>TramvaiBuild.start</code> builds package either single time or in <code>watch</code> mode depending on configuration of <code>TramvaiBuild</code>:</p><div class="codeBlockContainer_K1bP language-ts"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">TramvaiBuild</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@tramvai/build&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">TramvaiBuild</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">start</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="copy-static-files">Copy static files<a aria-hidden="true" class="hash-link" href="#copy-static-files" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><p>Method <code>TramvaiBuild.copy</code> copies static assets to the <code>output</code> directory:</p><div class="codeBlockContainer_K1bP language-ts"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">TramvaiBuild</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@tramvai/build&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">TramvaiBuild</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">copy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="how-to">How to<a aria-hidden="true" class="hash-link" href="#how-to" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="build-separate-bundle-for-browsers">Build separate bundle for browsers<a aria-hidden="true" class="hash-link" href="#build-separate-bundle-for-browsers" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><p>Let&#x27;s say we have to entry points. One is for the server - <code>src/server.ts</code> and for the client - <code>src/browser.ts</code>. In this case we should set field <code>browser</code> in <code>package.json</code> the next way:</p><div class="codeBlockContainer_K1bP language-json"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;main&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lib/server.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;browser&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lib/browser.js&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><p>After build for publication we will get next <code>package.json</code>:</p><div class="codeBlockContainer_K1bP language-json"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;main&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lib/server.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;browser&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lib/browser.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;typings&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lib/server.d.ts&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;module&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lib/server.es.js&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="replace-specific-module-for-browser-bundle">Replace specific module for browser bundle<a aria-hidden="true" class="hash-link" href="#replace-specific-module-for-browser-bundle" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><p>Let&#x27;s say we have one entry point - <code>src/index.ts</code> and a module <code>src/external.ts</code> we want to replace by <code>src/external.browser.ts</code>. In this case we should set field <code>browser</code> in <code>package.json</code> the next way:</p><div class="codeBlockContainer_K1bP language-json"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;main&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lib/index.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;browser&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;./lib/external.js&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./lib/external.browser.js&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><p>After build for publication we will get next <code>package.json</code>:</p><div class="codeBlockContainer_K1bP language-json"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;main&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lib/index.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;browser&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;./lib/external.js&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./lib/external.browser.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;./lib/index.es.js&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./lib/index.browser.js&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;typings&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lib/index.d.ts&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;module&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lib/index.es.js&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="build-all-of-the-packages-in-monorepo-in-watch-mode">Build all of the packages in monorepo in watch mode<a aria-hidden="true" class="hash-link" href="#build-all-of-the-packages-in-monorepo-in-watch-mode" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><p>@TODO + link to <code>@tinkoff/fix-ts-references</code></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="import-module-only-under-some-circumstances-or-put-module-to-separate-chunk">Import module only under some circumstances or put module to separate chunk<a aria-hidden="true" class="hash-link" href="#import-module-only-under-some-circumstances-or-put-module-to-separate-chunk" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><p>Instead of static imports you can use dynamic import or require. In this case imported module will be build in the separate chunk. Later this chunk can be added by bundler to the generated bundle and if dynamic import was used it will be separate chunk as well after bundlers build, but when using require separate chunk will not be generated.</p><div class="codeBlockContainer_K1bP language-tsx"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> func </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> noop</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">NODE_ENV</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">!==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;production&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  func </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./realFunc&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> func </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="use-json-in-package">Use JSON in package<a aria-hidden="true" class="hash-link" href="#use-json-in-package" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><p>By default in root <code>tsconfig.json</code> option <code>resolveJsonModule</code> is enabled. It is allows to import json-files the same way as usual source code using <code>import</code>, moreover typecheck and tree-shaking will work to json as well when publishing package. To disable ts errors for json imports add to <code>tsconfig.json</code> of the package new entry to field <code>includes</code>:</p><div class="codeBlockContainer_K1bP language-json"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;includes&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./src&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./src/**/*.json&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="use-assets-file-in-the-package-eg-css-svg">Use assets file in the package (e.g. css, svg)<a aria-hidden="true" class="hash-link" href="#use-assets-file-in-the-package-eg-css-svg" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><p>These files are not used in bundle or source code and ts will ignore them. For proper package usage additional setup should be done. Add script <code>tramvai-copy</code> to <code>package.json</code>:</p><div class="codeBlockContainer_K1bP language-json"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;scripts&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;copy-static-assets&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;tramvai-copy&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><p>This script will copy not related files to source code to the output directory. Copying itself happens either on dependencies install in the repository root or on package publishing. As for some reasons output directory might be deleted it may be needed to rerun <code>tramvai-copy</code> command for package.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="use-css-modules">Use css-modules<a aria-hidden="true" class="hash-link" href="#use-css-modules" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫">‚Äã</a></h3><p>In order to disable typescript errors for css-modules imports add new file <code>typings.d.ts</code> to the <code>src</code> folder with the next content:</p><div class="codeBlockContainer_K1bP language-tsx"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">declare</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">module</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;*.css&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> value</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">default</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><p>To copy css while deb-build change next command:</p><div class="codeBlockContainer_K1bP language-json"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token property">&quot;watch&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;tramvai-copy &amp;&amp; tsc -w&quot;</span><br></span></code></pre><button type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" class="copyButton_Ue-o clean-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button></div></div><p>Such imports are not compiled. To use it properly you can use <code>@tramvai/cli</code> for building app or any other solution for the css-modules.</p><blockquote><p>When building correctness of imports for the css is not checking so check your package manually before publication.</p></blockquote></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/Tinkoff/tramvai/-/edit/master/docs/get-started/overview.md/tmp-docs/references/tools/build.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É</a></div><div class="col lastUpdated_1szQ"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#explanation" class="table-of-contents__link toc-highlight">Explanation</a><ul><li><a href="#nodejs-bundle-in-commonjs-format" class="table-of-contents__link toc-highlight">NodeJS bundle in CommonJs format</a></li><li><a href="#bundle-for-bundlers-webpack-etc-in-es-modules-format" class="table-of-contents__link toc-highlight">Bundle for bundlers (Webpack, etc.) in ES modules format</a></li><li><a href="#bundle-for-browsers" class="table-of-contents__link toc-highlight">Bundle for browsers</a></li><li><a href="#copy-static-assets" class="table-of-contents__link toc-highlight">Copy static assets</a></li><li><a href="#build-and-copy-migrations" class="table-of-contents__link toc-highlight">Build and copy migrations</a></li></ul></li><li><a href="#cli" class="table-of-contents__link toc-highlight">CLI</a><ul><li><a href="#single-build" class="table-of-contents__link toc-highlight">Single build</a></li><li><a href="#build-in-watch-mode" class="table-of-contents__link toc-highlight">Build in watch mode</a></li><li><a href="#copy-static-assets-1" class="table-of-contents__link toc-highlight">Copy static assets</a></li><li><a href="#available-flags" class="table-of-contents__link toc-highlight">Available flags</a></li></ul></li><li><a href="#javascript-api" class="table-of-contents__link toc-highlight">JavaScript API</a><ul><li><a href="#tramvaibuild" class="table-of-contents__link toc-highlight">TramvaiBuild</a></li><li><a href="#build" class="table-of-contents__link toc-highlight">Build</a></li><li><a href="#copy-static-files" class="table-of-contents__link toc-highlight">Copy static files</a></li></ul></li><li><a href="#how-to" class="table-of-contents__link toc-highlight">How to</a><ul><li><a href="#build-separate-bundle-for-browsers" class="table-of-contents__link toc-highlight">Build separate bundle for browsers</a></li><li><a href="#replace-specific-module-for-browser-bundle" class="table-of-contents__link toc-highlight">Replace specific module for browser bundle</a></li><li><a href="#build-all-of-the-packages-in-monorepo-in-watch-mode" class="table-of-contents__link toc-highlight">Build all of the packages in monorepo in watch mode</a></li><li><a href="#import-module-only-under-some-circumstances-or-put-module-to-separate-chunk" class="table-of-contents__link toc-highlight">Import module only under some circumstances or put module to separate chunk</a></li><li><a href="#use-json-in-package" class="table-of-contents__link toc-highlight">Use JSON in package</a></li><li><a href="#use-assets-file-in-the-package-eg-css-svg" class="table-of-contents__link toc-highlight">Use assets file in the package (e.g. css, svg)</a></li><li><a href="#use-css-modules" class="table-of-contents__link toc-highlight">Use css-modules</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/overview">–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/get-started/create-app">–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/references/tramvai/create-app">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API</a></li></ul></div><div class="col footer__col"><div class="footer__title">–†–µ—Å—É—Ä—Å—ã</div><ul class="footer__items"><li class="footer__item"><a href="https://codesandbox.io/s/tramvai-new-qgk90" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Codesandbox<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">–°—Å—ã–ª–∫–∏</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Tinkoff/tramvai" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/logo-tinkoff.svg" alt="" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/logo-tinkoff.svg" alt="" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div><div class="footer__copyright">Copyright ¬© 2022 tinkoff.ru</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b723213f.js"></script>
<script src="/assets/js/main.0ad2b921.js"></script>
</body>
</html>